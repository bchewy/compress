(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4538)}])},4538:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var s=a(7876),i=a(4232),r=a(3916),n=a(5390),o=a(8465),l=a(4125),c=a(9812),d=a(6495),m=a(4622),p=a(1131),u=a(2467),h=a(7297),g=a(127),x=a(1449),b=a(6257),f=a(498),y=a(7328),v=a.n(y),w=a(5105),j=a.n(w);let N={PDF:"pdf",IMAGE:"image",TEXT:"text",DOCUMENT:"document",VIDEO:"video",AUDIO:"audio",ARCHIVE:"archive"},P={[N.PDF]:{extensions:[".pdf"],mimeTypes:["application/pdf"],icon:"\uD83D\uDCC4",description:"PDF Documents"},[N.IMAGE]:{extensions:[".jpg",".jpeg",".png",".gif",".bmp",".webp",".tiff",".svg"],mimeTypes:["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","image/tiff","image/svg+xml"],icon:"\uD83D\uDDBC️",description:"Images"},[N.TEXT]:{extensions:[".txt",".md",".json",".xml",".csv",".log",".rtf"],mimeTypes:["text/plain","text/markdown","application/json","text/xml","text/csv","text/rtf"],icon:"\uD83D\uDCDD",description:"Text Files"},[N.DOCUMENT]:{extensions:[".doc",".docx",".xls",".xlsx",".ppt",".pptx",".odt",".ods",".odp"],mimeTypes:["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation"],icon:"\uD83D\uDCCA",description:"Office Documents"},[N.VIDEO]:{extensions:[".mp4",".avi",".mov",".wmv",".flv",".webm",".mkv"],mimeTypes:["video/mp4","video/avi","video/quicktime","video/x-ms-wmv","video/x-flv","video/webm","video/x-matroska"],icon:"\uD83C\uDFA5",description:"Videos"},[N.AUDIO]:{extensions:[".mp3",".wav",".aac",".ogg",".flac",".m4a"],mimeTypes:["audio/mpeg","audio/wav","audio/aac","audio/ogg","audio/flac","audio/mp4"],icon:"\uD83C\uDFB5",description:"Audio Files"},[N.ARCHIVE]:{extensions:[".zip",".rar",".7z",".tar",".gz"],mimeTypes:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip"],icon:"\uD83D\uDDDC️",description:"Archives"}};function F(e){let t="."+e.name.split(".").pop().toLowerCase(),a=e.type.toLowerCase();for(let[e,s]of Object.entries(P))if(s.extensions.includes(t)||s.mimeTypes.includes(a))return e;return null}function k(e){return P[e]||null}var I=a(8537);let C=null;a.e(587).then(a.bind(a,3587)).then(e=>{C=e.default});let D={JPEG:"jpeg",PNG:"png"};async function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{quality:a=.8,format:s=D.JPEG,maxWidth:i=null,maxHeight:r=null,maintainAspectRatio:n=!0,progressCallback:o=()=>{}}=t;if(C&&(s===D.JPEG||s===D.PNG))try{o(10),o(50);let t=await C(e,{maxSizeMB:1,maxWidthOrHeight:Math.max(i||1920,r||1920),useWebWorker:!0,quality:a,fileType:"image/".concat(s)});return o(100),new File([t],A(e.name,s),{type:"image/".concat(s)})}catch(e){I.mj.warn("browser-image-compression failed, falling back to canvas method:",e)}return new Promise((t,l)=>{let c=new Image,d=document.createElement("canvas"),m=d.getContext("2d");c.onload=()=>{try{o(25);let{width:p,height:u}=function(e,t,a,s,i){let r=e,n=t;if(!a&&!s)return{width:r,height:n};if(i){let i=e/t;a&&s?(r>a&&(n=(r=a)/i),n>s&&(r=(n=s)*i)):a?r>a&&(n=(r=a)/i):s&&n>s&&(r=(n=s)*i)}else a&&(r=Math.min(r,a)),s&&(n=Math.min(n,s));return{width:Math.round(r),height:Math.round(n)}}(c.width,c.height,i,r,n);d.width=p,d.height=u,o(50),m.drawImage(c,0,0,p,u),o(75),d.toBlob(a=>{if(!a)return void l(Error("Failed to compress image"));o(100);let i=new File([a],A(e.name,s),{type:"image/".concat(s)});t(i)},"image/".concat(s),a)}catch(e){l(e)}},c.onerror=()=>{l(Error("Failed to load image"))},c.src=URL.createObjectURL(e)})}function A(e,t){let a=e.substring(0,e.lastIndexOf("."));return"".concat(a,".").concat(t)}async function T(e){return new Promise((t,a)=>{let s=new Image;s.onload=()=>{t({width:s.width,height:s.height,aspectRatio:(s.width/s.height).toFixed(2),megapixels:(s.width*s.height/1e6).toFixed(2),size:(0,I.v7)(e.size),format:e.type,filename:e.name}),URL.revokeObjectURL(s.src)},s.onerror=()=>{a(Error("Failed to load image for metadata extraction"))},s.src=URL.createObjectURL(e)})}let S=null;a.e(155).then(a.bind(a,278)).then(e=>{S=e});let M={PLAIN:"txt",MARKDOWN:"md",JSON:"json",XML:"xml",CSV:"csv",RTF:"rtf"},O={GZIP:"gzip",MINIFY:"minify",OPTIMIZE:"optimize"};async function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:a=O.OPTIMIZE,removeComments:s=!0,removeExtraWhitespace:i=!0,removeEmptyLines:r=!0,optimizeJson:n=!0,progressCallback:o=()=>{}}=t;try{o(10);let l=await R(e);o(30);let c=l,d=J(e);switch(o(50),a){case O.MINIFY:c=await L(l,d,{removeComments:s,removeExtraWhitespace:i,removeEmptyLines:r});break;case O.OPTIMIZE:c=await W(l,d,{removeComments:s,removeExtraWhitespace:i,removeEmptyLines:r,optimizeJson:n});break;case O.GZIP:if(S)try{let t=new TextEncoder().encode(l),a=S.gzip(t),s=new Blob([a],{type:"application/gzip"}),i=e.name+".gz",r=new File([s],i,{type:"application/gzip"});return o(100),r}catch(e){I.mj.warn("GZIP compression failed, falling back to optimization:",e),c=await W(l,d,t)}else I.mj.warn("Pako not available, falling back to optimization"),c=await W(l,d,t)}o(80);let m=new Blob([c],{type:e.type}),p=new File([m],e.name,{type:e.type});return o(100),p}catch(e){throw I.mj.error("Error compressing text file:",e),e}}async function L(e,t,a){var s,i,r,n;let o=e;switch(t){case M.JSON:o=function(e){try{let t=JSON.parse(e);return JSON.stringify(t)}catch(t){return I.mj.warn("Invalid JSON, returning original content"),e}}(e);break;case M.XML:let l;s=e,i=a,l=s,i.removeComments&&(l=l.replace(/<!--[\s\S]*?-->/g,"")),o=l=(l=l.replace(/>\s+</g,"><")).trim();break;case M.CSV:o=function(e,t){let a=e.split("\n");return(t.removeEmptyLines?a.filter(e=>""!==e.trim()):a).map(e=>e.replace(/\s*,\s*/g,",").trim()).join("\n")}(e,a);break;default:let c;r=e,n=a,c=r,n.removeExtraWhitespace&&(c=(c=c.replace(/[ \t]+/g," ")).replace(/[ \t]+$/gm,"")),n.removeEmptyLines&&(c=c.replace(/\n\s*\n\s*\n/g,"\n\n")),o=c.trim()}return o}async function W(e,t,a){var s,i,r,n;let o=e;switch(a.removeExtraWhitespace&&(o=(o=o.replace(/[ \t]+/g," ")).replace(/[ \t]+$/gm,"")),a.removeEmptyLines&&(o=o.replace(/\n\s*\n\s*\n/g,"\n\n")),t){case M.JSON:a.optimizeJson&&(o=function(e){try{let t=JSON.parse(e);return JSON.stringify(t,null,2)}catch(t){return I.mj.warn("Invalid JSON, returning original content"),e}}(o));break;case M.XML:let l;s=o,i=a,l=s,i.removeComments&&(l=l.replace(/<!--[\s\S]*?-->/g,"")),o=l=l.replace(/>\s+</g,">\n<");break;case M.MARKDOWN:let c;r=o,n=a,c=r,n.removeComments&&(c=c.replace(/<!--[\s\S]*?-->/g,"")),o=c=(c=c.replace(/^(#{1,6})\s*(.+)$/gm,"$1 $2")).replace(/^(\s*[*+-])\s+/gm,"$1 ")}return o}function J(e){switch(e.name.split(".").pop().toLowerCase()){case"json":return M.JSON;case"xml":return M.XML;case"csv":return M.CSV;case"md":case"markdown":return M.MARKDOWN;case"rtf":return M.RTF;default:return M.PLAIN}}function R(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=e=>{t(e.target.result)},s.onerror=()=>{a(Error("Failed to read file"))},s.readAsText(e)})}async function G(e){try{let t=await R(e),a=t.split("\n"),s=t.split(/\s+/).filter(e=>e.length>0),i=t.length,r=t.replace(/\s/g,"").length;return{filename:e.name,size:(0,I.v7)(e.size),type:J(e),lines:a.length,words:s.length,characters:i,charactersNoSpaces:r,averageWordsPerLine:(s.length/a.length).toFixed(2),encoding:"UTF-8"}}catch(e){throw I.mj.error("Error getting text metadata:",e),e}}class U{async compressFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},s=F(e);if(!s)throw Error("Unsupported file type: ".concat(e.name));let i=this.generateJobId();this.activeJobs.set(i,{file:e,status:"processing",startTime:Date.now()});try{let r;switch(s){case N.PDF:r=await this.compressPdfFile(e,t,a);break;case N.IMAGE:r=await this.compressImageFile(e,t,a);break;case N.TEXT:r=await this.compressTextFile(e,t,a);break;case N.DOCUMENT:r=await this.compressDocumentFile(e,t,a);break;case N.VIDEO:r=await this.compressVideoFile(e,t,a);break;case N.AUDIO:r=await this.compressAudioFile(e,t,a);break;case N.ARCHIVE:r=await this.optimizeArchiveFile(e,t,a);break;default:throw Error("No compression handler for file type: ".concat(s))}return r.fileType=s,r.originalSize=e.size,r.jobId=i,r.processingTime=Date.now()-this.activeJobs.get(i).startTime,this.activeJobs.set(i,{...this.activeJobs.get(i),status:"completed",result:r}),r}catch(e){throw this.activeJobs.set(i,{...this.activeJobs.get(i),status:"failed",error:e.message}),e}}async compressFiles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},s=[],i=e.length,r=this.groupFilesByType(e),n=0;for(let[e,o]of Object.entries(r))for(let r of o){try{let o=t=>{let s=(n+t/100)/i*100;a(s,n,r.name,e)},l=await this.compressFile(r,t[e]||t,o);s.push({original:r,compressed:l.compressedFile,metadata:l.metadata||{},reduction:this.calculateReduction(r.size,l.compressedFile.size),fileType:e,success:!0,processingTime:l.processingTime})}catch(t){I.mj.error("Failed to compress ".concat(r.name,":"),t),s.push({original:r,compressed:null,error:t.message,fileType:e,success:!1})}n++}return s}async compressPdfFile(e,t,a){let{quality:s=50,dpi:i=150}=t;return{compressedFile:await (0,I.lA)(e,s,i,a),metadata:{originalQuality:"Unknown",newQuality:s,dpi:i,compression:"JPEG"}}}async compressImageFile(e,t,a){let{quality:s=.8,format:i="jpeg",maxWidth:r=null,maxHeight:n=null}=t,o=await T(e);return{compressedFile:await E(e,{quality:s,format:i,maxWidth:r,maxHeight:n,progressCallback:a}),metadata:{...o,newFormat:i,newQuality:s}}}async compressTextFile(e,t,a){let{method:s="optimize",removeComments:i=!0,removeExtraWhitespace:r=!0}=t,n=await G(e);return{compressedFile:await z(e,{method:s,removeComments:i,removeExtraWhitespace:r,progressCallback:a}),metadata:{...n,compressionMethod:s}}}async compressDocumentFile(e,t,a){return a(100),{compressedFile:e,metadata:{note:"Document compression coming soon",format:e.type}}}async compressVideoFile(e,t,a){return a(100),{compressedFile:e,metadata:{note:"Video compression coming soon",format:e.type}}}async compressAudioFile(e,t,a){return a(100),{compressedFile:e,metadata:{note:"Audio compression coming soon",format:e.type}}}async optimizeArchiveFile(e,t,a){return a(100),{compressedFile:e,metadata:{note:"Archive optimization coming soon",format:e.type}}}groupFilesByType(e){let t={};return e.forEach(e=>{let a=F(e);a&&(t[a]||(t[a]=[]),t[a].push(e))}),t}calculateReduction(e,t){return((e-t)/e*100).toFixed(2)}generateJobId(){return"job_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}getJobStatus(e){return this.activeJobs.get(e)||null}cancelJob(e){this.activeJobs.has(e)&&this.activeJobs.set(e,{...this.activeJobs.get(e),status:"cancelled"})}async getCompressionRecommendations(e){let t=F(e),a=k(t),s={fileType:t,icon:(null==a?void 0:a.icon)||"\uD83D\uDCC4",suggestions:[]};switch(t){case N.IMAGE:(await T(e)).megapixels>5&&s.suggestions.push({type:"resize",description:"Consider resizing - image is very large",impact:"high"}),"image/png"!==e.type||this.hasTransparency(e)||s.suggestions.push({type:"format",description:"Convert PNG to JPEG for better compression",impact:"medium"});break;case N.PDF:e.size>0xa00000&&s.suggestions.push({type:"quality",description:"Large PDF - consider aggressive compression",impact:"high"});break;case N.TEXT:"json"===(await G(e)).type&&s.suggestions.push({type:"minify",description:"JSON can be minified for better compression",impact:"medium"})}return s}hasTransparency(e){return!0}constructor(){this.supportedTypes=Object.values(N),this.activeJobs=new Map}}let B=new U;function Z(){var e;let[t,a]=(0,i.useState)([]),[r,n]=(0,i.useState)([]),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(0),[m,p]=(0,i.useState)(""),[u,h]=(0,i.useState)({quality:50,dpi:150}),[g,x]=(0,i.useState)({quality:.8,format:"jpeg",maxWidth:null,maxHeight:null}),[b,f]=(0,i.useState)({method:"optimize",removeComments:!0,removeExtraWhitespace:!0,removeEmptyLines:!0}),[y,w]=(0,i.useState)("all"),[C,D]=(0,i.useState)(!1),E=(0,i.useRef)(null),A=(0,i.useRef)(null),T=e=>{let t=Array.from(e).filter(e=>null!==F(e)||(console.warn("Unsupported file type: ".concat(e.name)),!1));if(0===t.length)return void alert("No supported files found. Please select PDF, image, text, or document files.");t.length!==e.length&&alert("".concat(e.length-t.length," unsupported files were excluded.")),a(e=>[...e,...t])},S=e=>{a(t=>t.filter((t,a)=>a!==e))},M=async()=>{if(0===t.length)return void alert("Please select at least one file to compress.");l(!0),n([]),d(0);try{let e={[N.PDF]:u,[N.IMAGE]:g,[N.TEXT]:b},a=await B.compressFiles(t,e,(e,t,a,s)=>{d(e),p(a)});n(a)}catch(e){console.error("Error processing files:",e),alert("Error processing files: "+e.message)}l(!1),d(0),p("")},O=e=>t.filter(t=>F(t)===e),z=(e,a)=>0===e.length?null:(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold text-gray-700 mb-4 border-b border-gray-200 pb-2",children:[a," (",e.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:e.map((e,a)=>{let i=k(F(e));return(0,s.jsxs)("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[(0,s.jsx)("div",{className:"text-2xl mr-4",children:(null==i?void 0:i.icon)||"\uD83D\uDCC4"}),(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("div",{className:"font-medium text-gray-800",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:(0,I.v7)(e.size)}),(0,s.jsx)("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:(null==i?void 0:i.description)||"Unknown"})]}),(0,s.jsx)("button",{className:"ml-4 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors font-bold",onClick:()=>S(t.indexOf(e)),children:"\xd7"})]},a)})})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v(),{children:[(0,s.jsx)("title",{children:"Universal File Compressor"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"})]}),(0,s.jsx)(j(),{src:"https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",strategy:"beforeInteractive"}),(0,s.jsx)(j(),{src:"https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js",strategy:"beforeInteractive"}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto bg-white rounded-3xl shadow-2xl p-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-800 text-center mb-4",children:"Universal File Compressor"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 mb-8",children:[(0,s.jsx)("p",{className:"text-lg text-gray-600 text-center",children:"Compress PDFs, images, text files, and more while maintaining quality"}),(0,s.jsxs)("a",{href:"https://github.com/bchewy/compress",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-700 text-sm",target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)("svg",{height:"20",viewBox:"0 0 16 16",width:"20",className:"fill-current",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})}),"GitHub Repository"]})]}),(0,s.jsx)("div",{className:"text-center mb-8 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500",children:(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,s.jsx)("strong",{children:"Supported formats:"})," PDF, JPEG, PNG, GIF, WebP, TXT, MD, JSON, XML, CSV, and more"]})}),(0,s.jsxs)("div",{ref:A,className:"border-3 border-dashed border-gray-300 rounded-xl p-12 text-center mb-8 transition-all duration-300 bg-gray-50 hover:bg-gray-100 hover:border-blue-400 cursor-pointer",onDragOver:e=>{var t;e.preventDefault(),null==(t=A.current)||t.classList.add("border-blue-500","bg-blue-50")},onDragLeave:()=>{var e;null==(e=A.current)||e.classList.remove("border-blue-500","bg-blue-50")},onDrop:e=>{var t;e.preventDefault(),null==(t=A.current)||t.classList.remove("border-blue-500","bg-blue-50"),T(e.dataTransfer.files)},onClick:()=>{var e;return null==(e=E.current)?void 0:e.click()},children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,s.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"Drop files here or"}),(0,s.jsx)("input",{ref:E,type:"file",accept:Object.values(P).flatMap(e=>e.extensions).join(","),multiple:!0,hidden:!0,onChange:e=>{T(e.target.files)}}),(0,s.jsx)("button",{className:"px-8 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Select Files"})]}),t.length>0&&(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:["Files to Process (",t.length,")"]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mb-6 border-b border-gray-200 pb-4",children:[(0,s.jsxs)("button",{className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat("all"===y?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>w("all"),children:["All (",t.length,")"]}),Object.values(N).map(e=>{let t=O(e);if(0===t.length)return null;let a=k(e);return(0,s.jsxs)("button",{className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(y===e?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>w(e),children:[a.icon," ",a.description," (",t.length,")"]},e)})]}),(0,s.jsx)("div",{children:"all"===y?z(t,"All Files"):z(O(y),(null==(e=k(y))?void 0:e.description)||"Files")})]}),t.length>0&&(0,s.jsxs)("div",{className:"mb-8 p-6 bg-gray-50 rounded-xl border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Compression Options"}),(0,s.jsxs)("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",onClick:()=>D(!C),children:[C?"Simple":"Advanced"," Options"]})]}),O(N.PDF).length>0&&(0,s.jsxs)("div",{className:"mb-6 p-4 bg-white rounded-lg border border-gray-200",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\uD83D\uDCC4 PDF Options"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quality: ",u.quality,"%"]}),(0,s.jsx)("input",{type:"range",min:"1",max:"100",value:u.quality,onChange:e=>h(t=>({...t,quality:parseInt(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["DPI: ",u.dpi]}),(0,s.jsx)("input",{type:"range",min:"72",max:"300",value:u.dpi,onChange:e=>h(t=>({...t,dpi:parseInt(e.target.value)})),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]})]})]}),O(N.IMAGE).length>0&&(0,s.jsxs)("div",{className:"file-type-options",children:[(0,s.jsx)("h4",{children:"\uD83D\uDDBC️ Image Options"}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsxs)("label",{children:["Quality: ",Math.round(100*g.quality),"%"]}),(0,s.jsx)("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:g.quality,onChange:e=>x(t=>({...t,quality:parseFloat(e.target.value)}))})]}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("label",{children:"Format:"}),(0,s.jsxs)("select",{value:g.format,onChange:e=>x(t=>({...t,format:e.target.value})),children:[(0,s.jsx)("option",{value:"jpeg",children:"JPEG"}),(0,s.jsx)("option",{value:"png",children:"PNG"}),(0,s.jsx)("option",{value:"webp",children:"WebP"})]})]}),C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("label",{children:"Max Width (px):"}),(0,s.jsx)("input",{type:"number",placeholder:"Auto",value:g.maxWidth||"",onChange:e=>x(t=>({...t,maxWidth:e.target.value?parseInt(e.target.value):null}))})]}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("label",{children:"Max Height (px):"}),(0,s.jsx)("input",{type:"number",placeholder:"Auto",value:g.maxHeight||"",onChange:e=>x(t=>({...t,maxHeight:e.target.value?parseInt(e.target.value):null}))})]})]})]}),O(N.TEXT).length>0&&(0,s.jsxs)("div",{className:"file-type-options",children:[(0,s.jsx)("h4",{children:"\uD83D\uDCDD Text Options"}),(0,s.jsxs)("div",{className:"option",children:[(0,s.jsx)("label",{children:"Method:"}),(0,s.jsxs)("select",{value:b.method,onChange:e=>f(t=>({...t,method:e.target.value})),children:[(0,s.jsx)("option",{value:"optimize",children:"Optimize"}),(0,s.jsx)("option",{value:"minify",children:"Minify"}),(0,s.jsx)("option",{value:"gzip",children:"GZIP"})]})]}),C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"option-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",checked:b.removeComments,onChange:e=>f(t=>({...t,removeComments:e.target.checked}))}),(0,s.jsx)("label",{children:"Remove Comments"})]}),(0,s.jsxs)("div",{className:"option-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",checked:b.removeExtraWhitespace,onChange:e=>f(t=>({...t,removeExtraWhitespace:e.target.checked}))}),(0,s.jsx)("label",{children:"Remove Extra Whitespace"})]}),(0,s.jsxs)("div",{className:"option-checkbox",children:[(0,s.jsx)("input",{type:"checkbox",checked:b.removeEmptyLines,onChange:e=>f(t=>({...t,removeEmptyLines:e.target.checked}))}),(0,s.jsx)("label",{children:"Remove Empty Lines"})]})]})]})]}),o&&(0,s.jsxs)("div",{className:"mb-8 p-6 bg-blue-50 rounded-xl border border-blue-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"Processing Files..."}),(0,s.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-3 mb-4",children:(0,s.jsx)("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(c,"%")}})}),(0,s.jsxs)("p",{className:"text-blue-700 text-sm",children:[Math.round(c),"% - ",m]})]}),(0,s.jsx)("div",{className:"text-center mb-8",children:(0,s.jsx)("button",{className:"px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 ".concat(0===t.length||o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:scale-105"),disabled:0===t.length||o,onClick:M,children:o?"Processing...":"Compress ".concat(t.length," File").concat(1===t.length?"":"s")})}),(()=>{if(0===r.length)return null;let e=r.filter(e=>e.success),t=r.filter(e=>!e.success);return(0,s.jsxs)("div",{className:"results",children:[(0,s.jsxs)("h3",{children:["Results (",r.length," files processed)"]}),e.length>0&&(0,s.jsxs)("div",{className:"successful-results",children:[(0,s.jsxs)("h4",{children:["✅ Successfully Compressed (",e.length,")"]}),e.map((e,t)=>{let a=k(e.fileType);return(0,s.jsxs)("div",{className:"result-item",children:[(0,s.jsxs)("div",{className:"result-header",children:[(0,s.jsx)("div",{className:"file-icon",children:(null==a?void 0:a.icon)||"\uD83D\uDCC4"}),(0,s.jsx)("div",{className:"file-name",children:e.original.name})]}),(0,s.jsxs)("div",{className:"result-details",children:[(0,s.jsxs)("div",{className:"size-comparison",children:[(0,s.jsxs)("span",{children:["Original: ",(0,I.v7)(e.original.size)]}),(0,s.jsx)("span",{children:" → "}),(0,s.jsxs)("span",{children:["Compressed: ",(0,I.v7)(e.compressed.size)]}),(0,s.jsxs)("span",{className:"reduction",children:[" (",e.reduction,"% smaller)"]})]}),(0,s.jsx)("div",{className:"actions",children:(0,s.jsx)("button",{onClick:()=>(0,I.PE)(e.compressed),children:"Download"})})]})]},t)})]}),t.length>0&&(0,s.jsxs)("div",{className:"failed-results",children:[(0,s.jsxs)("h4",{children:["❌ Failed to Compress (",t.length,")"]}),t.map((e,t)=>(0,s.jsxs)("div",{className:"result-item error",children:[(0,s.jsx)("div",{className:"file-name",children:e.original.name}),(0,s.jsx)("div",{className:"error-message",children:e.error})]},t))]}),e.length>0&&(0,s.jsx)("div",{className:"download-all-container",children:(0,s.jsx)("button",{onClick:()=>(0,I.zg)(e.map(e=>e.compressed)),children:"Download All Compressed Files"})})]})})()]})]})}let H=e=>{let{icon:t,title:a,description:i,delay:n=0}=e;return(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:n},className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20 shadow-xl hover:shadow-2xl transition-all duration-300 hover:bg-white/15 group",children:[(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-400 to-purple-600 rounded-xl group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(t,{className:"w-8 h-8 text-white"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-white ml-4",children:a})]}),(0,s.jsx)("p",{className:"text-gray-200 leading-relaxed",children:i})]})},X=e=>{let{icon:t,className:a,delay:i=0}=e;return(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,delay:i},className:"absolute ".concat(a," hidden lg:block"),children:(0,s.jsx)(r.P.div,{animate:{y:[0,-15,0],rotate:[0,3,-3,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"p-3 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 shadow-lg",children:(0,s.jsx)(t,{className:"w-6 h-6 text-white/70"})})})};function _(){let[e,t]=(0,i.useState)(!1);return e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("button",{onClick:()=>t(!1),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-xl hover:from-purple-700 hover:to-blue-700 transition-all duration-300 shadow-lg",children:"← Back to Home"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Universal File Compressor"})]}),(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,s.jsx)(Z,{})})]})}):(0,s.jsxs)("div",{className:"min-h-screen relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,s.jsx)(r.P.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-r from-blue-500/30 to-purple-500/30 rounded-full blur-3xl"}),(0,s.jsx)(r.P.div,{animate:{scale:[1.2,1,1.2],opacity:[.2,.5,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gradient-to-r from-cyan-500/30 to-blue-500/30 rounded-full blur-3xl"}),(0,s.jsx)(r.P.div,{animate:{scale:[1,1.3,1],opacity:[.4,.2,.4]},transition:{duration:12,repeat:1/0,ease:"easeInOut",delay:4},className:"absolute top-3/4 left-1/2 transform -translate-x-1/2 w-72 h-72 bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-full blur-3xl"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.03)_1px,transparent_1px)] bg-[size:50px_50px]"}),(0,s.jsx)("div",{className:"absolute inset-0 opacity-20 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxmaWx0ZXIgaWQ9Im5vaXNlIj4KICAgICAgPGZlVHVyYnVsZW5jZSBiYXNlRnJlcXVlbmN5PSIwLjkiIG51bU9jdGF2ZXM9IjEiIHR5cGU9ImZyYWN0YWxOb2lzZSIvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbHRlcj0idXJsKCNub2lzZSkiIG9wYWNpdHk9IjAuMSIvPgo8L3N2Zz4K')]"})]}),(0,s.jsx)(X,{icon:n.A,className:"top-20 left-10",delay:.2}),(0,s.jsx)(X,{icon:o.A,className:"top-40 right-16",delay:.4}),(0,s.jsx)(X,{icon:l.A,className:"bottom-40 left-20",delay:.6}),(0,s.jsx)(X,{icon:c.A,className:"bottom-20 right-10",delay:.8}),(0,s.jsxs)("div",{className:"relative z-10 min-h-screen",children:[(0,s.jsxs)("section",{className:"px-6 pt-20 pb-32 relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(r.P.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{rotate:{duration:30,repeat:1/0,ease:"linear"},scale:{duration:8,repeat:1/0,ease:"easeInOut"}},className:"w-[800px] h-[800px] border border-white/5 rounded-full"})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto text-center relative z-10",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8",children:[(0,s.jsx)(r.P.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{rotate:{duration:20,repeat:1/0,ease:"linear"},scale:{duration:4,repeat:1/0,ease:"easeInOut"}},className:"inline-block mb-8",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.A,{className:"w-20 h-20 text-yellow-400 drop-shadow-glow"}),(0,s.jsx)("div",{className:"absolute inset-0 w-20 h-20 bg-yellow-400/20 rounded-full blur-xl"})]})}),(0,s.jsxs)("h1",{className:"text-6xl md:text-8xl font-extrabold mb-6 leading-tight",children:[(0,s.jsx)(r.P.span,{className:"bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},children:"Ultra"}),(0,s.jsx)("br",{}),(0,s.jsx)("span",{className:"text-white drop-shadow-2xl",children:"Compress"})]}),(0,s.jsxs)(r.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.8},className:"text-xl md:text-2xl text-gray-300 mb-12 max-w-4xl mx-auto leading-relaxed",children:["Transform your files with the power of"," ",(0,s.jsx)("span",{className:"text-transparent bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text font-semibold",children:"intelligent compression"}),". Fast, secure, and incredibly efficient."]})]}),(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"flex flex-col sm:flex-row gap-6 justify-center items-center mb-16",children:[(0,s.jsxs)(r.P.button,{onClick:()=>t(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-12 py-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl font-bold rounded-2xl shadow-2xl hover:from-blue-600 hover:to-purple-700 transition-all duration-300 flex items-center gap-3 group",children:["Start Compressing",(0,s.jsx)(m.A,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]}),(0,s.jsxs)(r.P.a,{href:"https://github.com/bchewy/compress",target:"_blank",rel:"noopener noreferrer",whileHover:{scale:1.05},className:"px-8 py-4 bg-white/10 backdrop-blur-lg text-white border border-white/20 rounded-2xl hover:bg-white/20 transition-all duration-300 flex items-center gap-3",children:[(0,s.jsx)(p.A,{className:"w-6 h-6"}),"View on GitHub"]})]}),(0,s.jsx)(r.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[{label:"File Types Supported",value:"15+"},{label:"Average Compression",value:"70%"},{label:"Processing Speed",value:"5MB/s"}].map((e,t)=>(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-4xl font-bold text-white mb-2",children:e.value}),(0,s.jsx)("div",{className:"text-gray-300",children:e.label})]},t))})]})]}),(0,s.jsx)("section",{className:"px-6 py-20",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-20",children:[(0,s.jsx)("h2",{className:"text-5xl font-bold text-white mb-6",children:"Why Choose UltraCompress?"}),(0,s.jsx)("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Experience the next generation of file compression with our cutting-edge technology"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[(0,s.jsx)(H,{icon:u.A,title:"Lightning Fast",description:"Process multiple files simultaneously with our optimized compression algorithms. Get results in seconds, not minutes.",delay:.1}),(0,s.jsx)(H,{icon:h.A,title:"100% Secure",description:"All processing happens locally in your browser. Your files never leave your device, ensuring complete privacy and security.",delay:.2}),(0,s.jsx)(H,{icon:g.A,title:"Universal Support",description:"Support for 15+ file formats including PDF, images, documents, and more. One tool for all your compression needs.",delay:.3}),(0,s.jsx)(H,{icon:x.A,title:"Smart Optimization",description:"AI-powered compression that maintains quality while maximizing size reduction. Customize settings for perfect results.",delay:.4}),(0,s.jsx)(H,{icon:b.A,title:"Drag & Drop",description:"Intuitive interface with drag-and-drop support. Batch process multiple files with just a few clicks.",delay:.5}),(0,s.jsx)(H,{icon:c.A,title:"Instant Download",description:"Download compressed files individually or as a combined package. Multiple format options available.",delay:.6})]})]})}),(0,s.jsx)("section",{className:"px-6 py-20",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-16",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold text-white mb-6",children:"Supported File Formats"}),(0,s.jsx)("p",{className:"text-xl text-gray-300 mb-12",children:"Compress any file type with confidence"})]}),(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.3},className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6",children:[{name:"PDF",color:"from-red-500 to-red-600"},{name:"JPEG",color:"from-green-500 to-green-600"},{name:"PNG",color:"from-blue-500 to-blue-600"},{name:"WebP",color:"from-purple-500 to-purple-600"},{name:"TXT",color:"from-yellow-500 to-yellow-600"},{name:"JSON",color:"from-indigo-500 to-indigo-600"},{name:"XML",color:"from-pink-500 to-pink-600"},{name:"CSV",color:"from-teal-500 to-teal-600"},{name:"MD",color:"from-orange-500 to-orange-600"},{name:"GIF",color:"from-cyan-500 to-cyan-600"},{name:"DOCX",color:"from-blue-600 to-blue-700"},{name:"ZIP",color:"from-gray-500 to-gray-600"}].map((e,t)=>(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1*t},className:"p-4 bg-gradient-to-br ".concat(e.color," rounded-xl text-white font-bold text-center shadow-lg hover:scale-105 transition-transform duration-300"),children:e.name},e.name))})]})}),(0,s.jsx)("section",{className:"px-6 py-20 text-center",children:(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h2",{className:"text-5xl font-bold text-white mb-6",children:"Ready to Compress?"}),(0,s.jsx)("p",{className:"text-xl text-gray-300 mb-12",children:"Join thousands of users who trust UltraCompress for their file compression needs"}),(0,s.jsxs)(r.P.button,{onClick:()=>t(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-16 py-6 bg-gradient-to-r from-green-500 to-blue-600 text-white text-2xl font-bold rounded-2xl shadow-2xl hover:from-green-600 hover:to-blue-700 transition-all duration-300 flex items-center gap-4 mx-auto group",children:[(0,s.jsx)(f.A,{className:"w-8 h-8"}),"Get Started Now",(0,s.jsx)(m.A,{className:"w-8 h-8 group-hover:translate-x-2 transition-transform"})]})]})})]})]})}function V(){return(0,s.jsx)(_,{})}},8537:(e,t,a)=>{"use strict";a.d(t,{ET:()=>r,Ek:()=>u,PE:()=>d,lA:()=>n,mj:()=>i,qC:()=>p,v7:()=>c,w$:()=>l,zg:()=>m}),"undefined"!=typeof pdfjsLib&&(pdfjsLib.GlobalWorkerOptions.workerSrc="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js");let s={region:"",credentials:{accessKeyId:"",secretAccessKey:""},bucketName:""},i={isDebugMode:!1,log:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];this.isDebugMode&&console.log(e,...a)},warn:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];this.isDebugMode?console.warn(e,...a):console.warn("[WARNING]",e,...a)},error:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];console.error(e,...a)}};async function r(){try{i.log("Loading AWS configuration from server...");let e=await fetch("/api/aws-config");if(!e.ok)throw Error("Failed to load AWS config: ".concat(e.status," ").concat(e.statusText));let t=await e.json();s.region=t.region,s.credentials.accessKeyId=t.credentials.accessKeyId,s.credentials.secretAccessKey=t.credentials.secretAccessKey,s.bucketName=t.bucketName,i.log("AWS configuration loaded successfully")}catch(e){throw i.error("Error loading AWS configuration:",e),e}}async function n(e,t,a,s){if("undefined"==typeof pdfjsLib||"undefined"==typeof PDFLib)throw Error("PDF libraries not loaded");let i=t/100,r=await e.arrayBuffer(),n=await pdfjsLib.getDocument({data:r}).promise,l=n.numPages,c=await PDFLib.PDFDocument.create();for(let e=1;e<=l;e++){s((e-1)/l*100);let t=await n.getPage(e),r=a/96,d=t.getViewport({scale:r}),m=document.createElement("canvas"),p=m.getContext("2d");m.width=d.width,m.height=d.height,await t.render({canvasContext:p,viewport:d}).promise;let u=m.toDataURL("image/jpeg",i),h=await o(u),g=await c.embedJpg(h);c.addPage([d.width,d.height]).drawImage(g,{x:0,y:0,width:d.width,height:d.height})}return s(100),new File([await c.save()],e.name,{type:"application/pdf"})}async function o(e){let t=atob(e.split(",")[1]),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return a}async function l(e,t){if("undefined"==typeof PDFLib)throw Error("PDFLib not loaded");try{i.log("Adding file to combined PDF:",e.name,"Size:",c(e.size)),i.log("Creating a fresh copy of the file using slice(0)");let a=e.slice(0),s=await a.arrayBuffer();i.log("ArrayBuffer created successfully, byteLength:",s.byteLength),i.log("Loading PDF from ArrayBuffer with PDFLib...");let r=await PDFLib.PDFDocument.load(s);i.log("Copying pages from source to target...");let n=r.getPageCount(),o=await t.copyPages(r,[...Array(n).keys()]);for(let e of o)t.addPage(e);return i.log("Successfully copied",o.length,"pages"),!0}catch(e){throw i.error("Error adding to combined PDF:",e),Error("Failed to add to combined PDF: "+e.message)}}function c(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"compressed_",a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="".concat(t).concat(e.name),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}function m(e){0!==e.length&&e.forEach((e,t)=>{setTimeout(()=>{d(e)},500*t)})}async function p(e){i.log("Processing large PDF in chunks:",e.name);try{let t=await e.slice(0).arrayBuffer(),a=(await pdfjsLib.getDocument({data:t}).promise).numPages;i.log("PDF has ".concat(a," pages, will process in chunks"));let s=e.size/1048576,r=5;s>30?r=2:s>20?r=3:s>10&&(r=4),i.log("Using chunk size of ".concat(r," pages based on PDF size (").concat(s.toFixed(2)," MB)"));let n=[];for(let e=1;e<=a;e+=r){let t=Math.min(e+r-1,a);n.push({startPage:e,endPage:t})}i.log("Split PDF into ".concat(n.length," chunks for processing"));let o=[],l=0;for(let t=0;t<n.length;t++){let a=n[t];i.log("Processing chunk ".concat(t+1,"/").concat(n.length," (pages ").concat(a.startPage,"-").concat(a.endPage,")"));try{let s=await PDFLib.PDFDocument.create(),r=await e.slice(0).arrayBuffer(),n=await PDFLib.PDFDocument.load(r),d=[];for(let e=a.startPage-1;e<a.endPage;e++)d.push(e);(await s.copyPages(n,d)).forEach(e=>s.addPage(e));let m=await s.save(),p=new File([m],"chunk_".concat(t+1,"_").concat(e.name),{type:"application/pdf"});i.log("Sending chunk ".concat(t+1," to OCR service (").concat(c(p.size),")"));let h=await u(p);h?(o.push(h),i.log("Successfully processed chunk ".concat(t+1))):(i.warn("Failed to process chunk ".concat(t+1," - no results returned")),l++)}catch(e){if(i.error("Error processing chunk ".concat(t+1,":"),e),++l>2&&l/(t+1)>.5)throw i.error("Too many chunks failing, aborting chunked processing"),Error("Multiple chunk processing failures - OCR may not be working properly")}let s=2e3+1e3*Math.random();i.log("Waiting ".concat(Math.round(s/1e3)," seconds before processing next chunk...")),await new Promise(e=>setTimeout(e,s))}if(0===o.length)throw Error("Failed to process any chunks of the PDF");let d={pageCount:a,totalWords:o.reduce((e,t)=>e+(t.totalWords||0),0),language:o[0].language,hasImages:o.some(e=>e.hasImages),extractedText:o.map(e=>e.extractedText||"").join("\n\n"),fullText:o.map(e=>e.fullText||"").join("\n\n"),images:[]};return o.forEach((e,t)=>{if(e.images&&e.images.length>0){let a=n[t].startPage;e.images.forEach(e=>{let t={...e};t.pageIndex=a-1+e.pageIndex,d.images.push(t)})}}),i.log("Successfully processed all chunks, combined ".concat(d.images.length," images")),d}catch(e){throw i.error("Error processing large PDF in chunks:",e),e}}async function u(e){return i.log("OCR analysis would be implemented here for:",e.name),{pageCount:1,totalWords:100,language:"en",hasImages:!1,extractedText:"Sample extracted text...",fullText:"Sample full text...",images:[]}}}},e=>{var t=t=>e(e.s=t);e.O(0,[45,636,593,792],()=>t(2936)),_N_E=e.O()}]);